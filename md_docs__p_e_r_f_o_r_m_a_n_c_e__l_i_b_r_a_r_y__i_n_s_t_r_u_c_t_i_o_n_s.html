<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="google" content="notranslate" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SAF: Performance Libraries Supported by SAF</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-498Z1C2LX5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-498Z1C2LX5');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SAF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs__p_e_r_f_o_r_m_a_n_c_e__l_i_b_r_a_r_y__i_n_s_t_r_u_c_t_i_o_n_s.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Performance Libraries Supported by SAF </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The Spatial_Audio_Framework (SAF) requires any library (or combination of libraries) which supports the <a href="https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms#Implementations">CBLAS</a> and <a href="https://en.wikipedia.org/wiki/LAPACK">LAPACK</a> standards</p>
<p >Currently, SAF supports <a href="https://software.intel.com/en-us/articles/free-ipsxe-tools-and-libraries">Intel MKL</a>, <a href="https://github.com/xianyi/OpenBLAS">OpenBLAS</a>, <a href="https://developer.apple.com/documentation/accelerate">Apple Accelerate</a>, and <a href="http://math-atlas.sourceforge.net/">ATLAS</a>. You may select which option you wish to use by adding one of the following pre-processor definitions:</p>
<div class="fragment"><div class="line">SAF_USE_INTEL_MKL_LP64        # great option, but only for x86 architectures (using the LP64 config [int32])</div>
<div class="line">SAF_USE_INTEL_MKL_ILP64       # great option, but only for x86 architectures (using the ILP64 config [int64])  </div>
<div class="line">SAF_USE_OPEN_BLAS_AND_LAPACKE # good option, works on everything</div>
<div class="line">SAF_USE_APPLE_ACCELERATE      # good option (x86 and ARM), faster than OpenBLAS, but MacOSX only &amp; slower than MKL</div>
<div class="line">SAF_USE_ATLAS                 # bad option (x86 and ARM), many LAPACK functions are missing</div>
<div class="line">SAF_USE...                    # please get in touch if you use something else! :-)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md13"></a>
SAF_USE_INTEL_MKL_LP64 or SAF_USE_INTEL_MKL_ILP64</h1>
<p >Intel MKL is perhaps the fastest library for <b>x86</b> platforms. It also includes an optimised FFT implementation and a number of additional vectorised utility functions which SAF is also able to make use of.</p>
<p ><b>Intel MKL can be downloaded (royalty-free) <a href="https://software.intel.com/en-us/articles/free-ipsxe-tools-and-libraries">from here</a></b>.</p>
<p >Unfortunately, while you can indeed link directly to the Intel MKL static/shared libraries... these files are rather large. Therefore, you may prefer to use the MKL builder to build a custom MKL library, which contains only the routines that SAF actually needs.</p>
<p >Instructions regarding how to build a custom MKL library for Windows, MacOSX, and Linux users, can be found below.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Linux/MacOSX users</h2>
<p >Run the following bash script (<b>sudo</b> privileges required):</p>
<div class="fragment"><div class="line">cd scripts</div>
<div class="line">sudo ./install-safmkl.sh [threaded|sequential] [lp64|ilp64] [path/to/mkl/tools/builder]</div>
</div><!-- fragment --><p >Add the following header search path to your project:</p>
<div class="fragment"><div class="line">[/opt|~]/intel/oneapi/mkl/latest/include/                   # The new oneapi path</div>
<div class="line">[/opt|~]/intel/compilers_and_libraries/linux/mkl/include    # Old path for Linux users</div>
<div class="line">[/opt|~]/intel/compilers_and_libraries/mac/mkl/include      # Old path for MacOSX users</div>
</div><!-- fragment --><p >Then add the following linker flag to your project:</p>
<div class="fragment"><div class="line">-L/usr/local/lib -lsaf_mkl_custom_lp64   # if you built the lp64 (32-bit integer) version</div>
<div class="line">-L/usr/local/lib -lsaf_mkl_custom_ilp64  # if you built the ilp64 (64-bit integer) version</div>
</div><!-- fragment --><p >Finally, add the appropriate global definition: </p><div class="fragment"><div class="line">SAF_USE_INTEL_MKL_LP64      # if you are linking with the lp64 (32-bit integer) version</div>
<div class="line">SAF_USE_INTEL_MKL_ILP64     # if you are linking with the ilp64 (64-bit integer) version</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
Windows users</h2>
<p >Run the following batch script using <b>x64 Developer Command Prompt for VS.exe</b> (open as <b>administrator</b>):</p>
<div class="fragment"><div class="line">cd scripts</div>
<div class="line">install-safmkl.bat</div>
</div><!-- fragment --><p >Add the following header search path to your project:</p>
<div class="fragment"><div class="line">C:/Program Files (x86)/IntelSWTools/compilers_and_libraries/windows/mkl/include</div>
</div><!-- fragment --><p >Add the following library search path to your project:</p>
<div class="fragment"><div class="line">C:/YOUR/WORKING/DIRECTORY/Spatial_Audio_Framework/dependencies/Win64/lib</div>
</div><!-- fragment --><p >Link your project against the following library: </p><div class="fragment"><div class="line">saf_mkl_custom_lp64.lib    # if you built the lp64 (32-bit integer) version</div>
<div class="line">saf_mkl_custom_ilp64.lib   # if you built the ilp64 (64-bit integer) version</div>
</div><!-- fragment --><p >Finally, add the appropriate global definition: </p><div class="fragment"><div class="line">SAF_USE_INTEL_MKL_LP64      # if you are linking with the lp64 (32-bit integer) version</div>
<div class="line">SAF_USE_INTEL_MKL_ILP64     # if you are linking with the ilp64 (64-bit integer) version</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
Other options</h2>
<p >This custom MKL library (lp64) is also installed alongside the <a href="http://research.spa.aalto.fi/projects/sparta_vsts/">SPARTA</a> VST plug-in suite. Athough, it will be noted that this may not be the most up-to-date version of the library.</p>
<p >You may of course also elect to not build this custom library and link directly, e.g. with: </p><div class="fragment"><div class="line">/opt/intel/oneapi/mkl/latest/lib/libmkl_rt.[dylib|so]</div>
</div><!-- fragment --><p >This will select the interface and threading at runtime, based on environment variables. You can check the options for your system with intel's <a href="https://software.intel.com/content/www/us/en/develop/tools/oneapi/components/onemkl/link-line-advisor.html">link-line-advisor</a>. The options can be passed directly to CMake, e.g. with </p><div class="fragment"><div class="line">-DSAF_PERFORMANCE_LIB=SAF_USE_INTEL_MKL_ILP64 -DINTEL_MKL_HEADER_PATH=&quot;/opt/intel/oneapi/mkl/latest/include&quot; -DINTEL_MKL_LIB=&quot;/opt/intel/oneapi/mkl/latest/lib/libmkl_intel_ilp64.dylib;/opt/intel/oneapi/mkl/latest/lib/libmkl_sequential.dylib;/opt/intel/oneapi/mkl/latest/lib/libmkl_core.dylib&quot;</div>
</div><!-- fragment --><p >Intel MKL also ships with recent <a href="https://anaconda.org">Anaconda</a> distributions. The easiest way to install with conda is: </p><div class="fragment"><div class="line">conda install mkl mkl-include</div>
</div><!-- fragment --><p> Please refer to the documentation to find out where conda installs packages on your platform.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
SAF_USE_OPEN_BLAS_AND_LAPACKE</h1>
<p >The framework also supports <a href="https://github.com/xianyi/OpenBLAS">OpenBLAS</a>. However, unlike Intel MKL and Apple Accelerate, the OpenBLAS library does not offer an optimised DFT/FFT, and some vector-vector operations; such as element-wise multiplications and additions. Therefore, consider pairing OpenBLAS with <b>SAF_ENABLE_SIMD</b> (enabling SSE3 and AVX2) and <b>SAF_USE_INTEL_IPP</b> or <b>SAF_USE_FFTW</b>, in which case, the performance of SAF will become roughly on par with e.g. Apple Accelerate; but not quite as fast as Intel MKL.</p>
<p >For Debian/Ubuntu based Linux distributions the required libraries may be installed via: </p><div class="fragment"><div class="line">sudo apt-get install liblapack3 liblapack-dev libopenblas-base libopenblas-dev liblapacke-dev</div>
</div><!-- fragment --><p> While Apple Accelerate is the more recommended option for MacOSX users, OpenBLAS may be installed and used with the following: </p><div class="fragment"><div class="line">brew install openblas</div>
<div class="line">export LDFLAGS=&quot;-L/usr/local/opt/openblas/lib&quot;</div>
<div class="line">export CPPFLAGS=&quot;-I/usr/local/opt/openblas/include&quot;</div>
</div><!-- fragment --><p >Windows users can follow the instuctions found <a href="https://github.com/xianyi/OpenBLAS/wiki/How-to-use-OpenBLAS-in-Microsoft-Visual-Studio">here</a>.</p>
<p >Lastly, you may also instead build the required libraries yourself via CMake. For example:</p>
<div class="fragment"><div class="line">git clone https://github.com/xianyi/OpenBLAS.git</div>
<div class="line"># install a fortran compiler if you haven&#39;t already (for lapack support)</div>
<div class="line">sudo apt-get install gfortran</div>
<div class="line"># build static libs</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_SHARED_LIBS=0 -DBUILD_WITHOUT_LAPACK=0</div>
<div class="line">make </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md18"></a>
SAF_USE_APPLE_ACCELERATE</h1>
<p >Only for MacOSX users. Simply link against the <a href="https://developer.apple.com/documentation/accelerate"><b>Accelerate</b></a> framework and you're good to go.</p>
<p >Note that Accelerate also includes an optimised DFT/FFT implementation and a number of additional vectorised utility functions which SAF is also able to make use of.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
SAF_USE_ATLAS</h1>
<p >Using <a href="http://math-atlas.sourceforge.net/">ATLAS</a> is not recommended, since some LAPACK functions are missing. However, if you don't mind losing some SAF functionality, then this may still be a good choice for your particular project. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Oct 13 2021 13:26:13 for SAF by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
<script type="text/javascript">
  $(function() {
      $(document).ready(function(){
         toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
         toggleButton.title = "Toggle Light/Dark Mode"
         document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
     })
  })
</script>
</body>
</html>
